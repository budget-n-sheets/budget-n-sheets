<!DOCTYPE html>
<html>

<head>
  <base target="_top">
  <meta charset="UTF-8">
  <?!= HtmlService2.htmlInclude("gas-common/htmlStyles"); ?>
  <?!= HtmlService2.htmlInclude('gas-common/htmlMaterialIcons'); ?>
  <style>
    td p {
      margin-top: 0;
      margin-bottom: 0;
      text-align: justify;
    }

    .table_row {
      display: table-row;
    }

    #header {
      height: 3.7em;
      width: 100%;
      border-bottom: 1px solid #dadbe0;
    }

    .header_table {
      display: table;
      width: inherit;
      height: inherit;
      text-align: center;
      border-collapse: separate;
      border-spacing: 13px 7px;
    }

    .header_tab {
      cursor: pointer;
      display: table-cell;
      vertical-align: middle;
      color: rgba(0, 0, 0, 0.54);
    }

    .header_tab.active {
      border-bottom: solid 2px;
    }

    .footer_table {
      display: table;
      width: 100%;
      border-collapse: separate;
      border-spacing: 7px;
      border-top: 1px solid #dadbe0;
    }

    .footer_cell {
      display: table-cell;
      vertical-align: middle;
    }
  </style>
</head>

<body>
  <div id="wrapper">
    <div id="header">
      <div class="header_table">
        <div class="table_row">
          <div class="header_tab active" id="tab_settings">
            <i class="material-icons-outlined md-24" title="Settings">settings</i>
          </div>
          <div class="header_tab" id="tab_maintenance">
            <i class="material-icons-outlined md-24" title="Maintenance">build</i>
          </div>
          <? if (settings_backup) { ?>
          <div class="header_tab" id="tab_backup">
            <i class="material-icons-outlined md-24" title="Backup">backup</i>
          </div>
          <? } ?>
        </div>
      </div>
    </div>

    <div id="content" style="margin-top: 7px;margin-bottom: 4.3em;">
      <?!= htmlPanelSettings ?>
      <?!= htmlPanelMaintenance ?>
      <? if (settings_backup) { ?>
        <?!= htmlPanelBackup ?>
      <? } ?>
    </div>

    <div id="footer">
      <div class="current" id="footer_response" style="padding:0 7px;"></div>
      <div class="footer_table">
        <div class="table_row">
          <div class="footer_cell left" style="width:100%;">
            <button class="action" id="b-Save" disabled>Save</button>
          </div>
          <div class="footer_cell right">
            <a href="<?= home_wiki ?>/Changing-Settings" target="_blank"><i class="material-icons md-24 md-click">help_outline</i></a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <?!= HtmlService2.htmlInclude("gas-common/htmlJavaScript"); ?>
  <?!= containment8d4adafda11Frame(); ?>
  <script>
    $(document).on("click", ".header_tab", function() {
      if ($(this).hasClass("active")) return;

      var select = $(this).attr("id");

      $(this).addClass("active")
        .siblings()
        .removeClass("active");
      $('.footer_cell.left button').remove();

      window.scrollTo(0, 0);
      if (select === "tab_settings") {
        $('.footer_cell.left').append('<button class="action" id="b-Save">Save</button>');
        $("#panel_Settings").show()
          .siblings()
          .hide();
      } else if (select === "tab_maintenance") {
        $("#panel_Maintenance").show()
          .siblings()
          .hide();
      <? if (settings_backup) { ?>
      } else if (select === "tab_backup") {
        $('.footer_cell.left').append('<button id="b-Backup" class="action">Back up now</button>');
        $("#panel_Backup").show()
          .siblings()
          .hide();
      <? } ?>
      }
    });

    function showStatus(msg) {
      $("#footer_response").empty().append(msg);
    }
  </script>
  <?!= jsPanelSettings ?>
  <?!= jsPanelMaintenance ?>
  <? if (settings_backup) { ?>
    <?!= jsPanelBackup ?>
  <? } ?>
</body>

</html>
